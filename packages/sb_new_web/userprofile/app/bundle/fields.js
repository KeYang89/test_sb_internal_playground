!function(e){function t(s){if(i[s])return i[s].exports;var n=i[s]={exports:{},id:s,loaded:!1};return e[s].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t){"use strict";e.exports={el:"#userprofile-fields",data:function(){return _.merge({users:!1,pages:0,count:"",fields:[],types:[],selected:[]},window.$data)},created:function(){this.Fields=this.$resource("api/userprofile/field{/id}"),this.load()},methods:{load:function(){return this.Fields.query().then(function(e){this.$set("fields",e.data)})},toggleRequired:function(e){e.data.required=e.data.required?0:1,this.Fields.save({id:e.id},{field:e}).then(function(){this.load(),this.$notify("Field saved.")},function(e){this.load(),this.$notify(e.data,"danger")})},getSelected:function(){return this.fields.filter(function(e){return this.isSelected(e)},this)},isSelected:function(e,t){return _.isArray(e)?_.every(e,function(e){return this.isSelected(e,t)},this):-1!==this.selected.indexOf(e.id.toString())&&(!t||!this.tree[e.id]||this.isSelected(this.tree[e.id],!0))},toggleSelect:function(e){var t=this.selected.indexOf(e.id.toString());-1==t?this.selected.push(e.id.toString()):this.selected.splice(t,1)},getType:function(e){return _.find(this.types,"id",e.type)},removeFields:function(){this.Fields["delete"]({id:"bulk"},{ids:this.selected}).then(function(){this.load(),this.$notify("Fields(s) deleted.")})}},components:{field:{props:["field"],template:"#field",computed:{type:function(){return this.$root.getType(this.field)}},methods:{isSelected:function(e){return this.$root.isSelected(e)}}}},watch:{fields:function(){var e=this;UIkit.nestable(this.$els.nestable,{maxDepth:1,group:"userprofile.fields"}).off("change.uk.nestable").on("change.uk.nestable",function(t,i,s,n){n&&"removed"!==n&&e.Fields.save({id:"updateOrder"},{fields:i.list()}).then(function(){e.load().success(function(){s.parent()[0]===i.element[0]&&setTimeout(function(){s.remove()},50)})},function(){this.$notify("Reorder failed.","danger")})})}}},Vue.ready(e.exports)}]);